// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Consent
import * as fhir from '../fhir.js';
// @ts-ignore
import { ConsentDataMeaningVsValidation } from '../fhirValueSets/ConsentDataMeaningVsValidation.js';
// @ts-ignore
import { ConsentExceptTypeVsValidation } from '../fhirValueSets/ConsentExceptTypeVsValidation.js';
// @ts-ignore
import { ConsentStateVsValidation } from '../fhirValueSets/ConsentStateVsValidation.js';
/**
 * Who or what is controlled by this consent. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
 */
export class ConsentActor extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentActor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role, options);
        }
        else {
            this.role = null;
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference, options);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.actor';
        }
        iss.push(...this.vRS('role', exp));
        iss.push(...this.vRS('reference', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentActor._fts_dataType = 'ConsentActor';
/**
 * The references to the policies that are included in this consent scope. Policies may be organizational, but are often defined jurisdictionally, or in law.
 */
export class ConsentPolicy extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentPolicy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['authority'] !== undefined) {
            this.authority = new fhir.FhirUri({ value: source.authority }, options);
        }
        if (source['_authority']) {
            if (this.authority) {
                this.authority.addExtendedProperties(source._authority);
            }
            else {
                this.authority = new fhir.FhirUri(source._authority, options);
            }
        }
        if (source['uri'] !== undefined) {
            this.uri = new fhir.FhirUri({ value: source.uri }, options);
        }
        if (source['_uri']) {
            if (this.uri) {
                this.uri.addExtendedProperties(source._uri);
            }
            else {
                this.uri = new fhir.FhirUri(source._uri, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.policy';
        }
        iss.push(...this.vOS('authority', exp));
        iss.push(...this.vOS('uri', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentPolicy._fts_dataType = 'ConsentPolicy';
/**
 * The resources controlled by this consent, if specific resources are referenced.
 */
export class ConsentData extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentData - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['meaning'] !== undefined) {
            this.meaning = new fhir.FhirCode({ value: source.meaning }, options);
        }
        else {
            this.meaning = null;
        }
        if (source['_meaning']) {
            if (this.meaning) {
                this.meaning.addExtendedProperties(source._meaning);
            }
            else {
                this.meaning = new fhir.FhirCode(source._meaning, options);
            }
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference, options);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.data';
        }
        iss.push(...this.vRSV('meaning', exp, 'ConsentDataMeaning', ConsentDataMeaningVsValidation, 'r'));
        iss.push(...this.vRS('reference', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentData._fts_dataType = 'ConsentData';
/**
 * Who or what is controlled by this Exception. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
 */
export class ConsentExceptActor extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentExceptActor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role, options);
        }
        else {
            this.role = null;
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference, options);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.except.actor';
        }
        iss.push(...this.vRS('role', exp));
        iss.push(...this.vRS('reference', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentExceptActor._fts_dataType = 'ConsentExceptActor';
/**
 * The resources controlled by this exception, if specific resources are referenced.
 */
export class ConsentExceptData extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentExceptData - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['meaning'] !== undefined) {
            this.meaning = new fhir.FhirCode({ value: source.meaning }, options);
        }
        else {
            this.meaning = null;
        }
        if (source['_meaning']) {
            if (this.meaning) {
                this.meaning.addExtendedProperties(source._meaning);
            }
            else {
                this.meaning = new fhir.FhirCode(source._meaning, options);
            }
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference, options);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.except.data';
        }
        iss.push(...this.vRSV('meaning', exp, 'ConsentDataMeaning', ConsentDataMeaningVsValidation, 'r'));
        iss.push(...this.vRS('reference', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentExceptData._fts_dataType = 'ConsentExceptData';
/**
 * An exception to the base policy of this consent. An exception can be an addition or removal of access permissions.
 */
export class ConsentExcept extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentExcept - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type'] !== undefined) {
            this.type = new fhir.FhirCode({ value: source.type }, options);
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type, options);
            }
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period, options);
        }
        if (source['actor']) {
            this.actor = source.actor.map((x) => new fhir.ConsentExceptActor(x, options));
        }
        else {
            this.actor = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.action = [];
        }
        if (source['securityLabel']) {
            this.securityLabel = source.securityLabel.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.securityLabel = [];
        }
        if (source['purpose']) {
            this.purpose = source.purpose.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.purpose = [];
        }
        if (source['class']) {
            this.class = source.class.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.class = [];
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.code = [];
        }
        if (source['dataPeriod']) {
            this.dataPeriod = new fhir.Period(source.dataPeriod, options);
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.ConsentExceptData(x, options));
        }
        else {
            this.data = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent.except';
        }
        iss.push(...this.vRSV('type', exp, 'ConsentExceptType', ConsentExceptTypeVsValidation, 'r'));
        iss.push(...this.vOS('period', exp));
        iss.push(...this.vOA('actor', exp));
        iss.push(...this.vOA('action', exp));
        iss.push(...this.vOA('securityLabel', exp));
        iss.push(...this.vOA('purpose', exp));
        iss.push(...this.vOA('class', exp));
        iss.push(...this.vOA('code', exp));
        iss.push(...this.vOS('dataPeriod', exp));
        iss.push(...this.vOA('data', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentExcept._fts_dataType = 'ConsentExcept';
/**
 * A record of a healthcare consumerâ€™s policy choices, which permits or denies identified recipient(s) or recipient role(s) to perform one or more actions within a given policy context, for specific purposes and periods of time.
 */
export class Consent extends fhir.DomainResource {
    /**
     * Default constructor for Consent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Consent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.category = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period, options);
        }
        if (source['dateTime'] !== undefined) {
            this.dateTime = new fhir.FhirDateTime({ value: source.dateTime }, options);
        }
        if (source['_dateTime']) {
            if (this.dateTime) {
                this.dateTime.addExtendedProperties(source._dateTime);
            }
            else {
                this.dateTime = new fhir.FhirDateTime(source._dateTime, options);
            }
        }
        if (source['consentingParty']) {
            this.consentingParty = source.consentingParty.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.consentingParty = [];
        }
        if (source['actor']) {
            this.actor = source.actor.map((x) => new fhir.ConsentActor(x, options));
        }
        else {
            this.actor = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.action = [];
        }
        if (source['organization']) {
            this.organization = source.organization.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.organization = [];
        }
        if (source['source']) {
            this.source = source.source;
        }
        else if (source['sourceAttachment']) {
            this.source = new fhir.Attachment(source.sourceAttachment, options);
        }
        else if (source['sourceIdentifier']) {
            this.source = new fhir.Identifier(source.sourceIdentifier, options);
        }
        else if (source['sourceReference']) {
            this.source = new fhir.Reference(source.sourceReference, options);
        }
        if (source['policy']) {
            this.policy = source.policy.map((x) => new fhir.ConsentPolicy(x, options));
        }
        else {
            this.policy = [];
        }
        if (source['policyRule'] !== undefined) {
            this.policyRule = new fhir.FhirUri({ value: source.policyRule }, options);
        }
        if (source['_policyRule']) {
            if (this.policyRule) {
                this.policyRule.addExtendedProperties(source._policyRule);
            }
            else {
                this.policyRule = new fhir.FhirUri(source._policyRule, options);
            }
        }
        if (source['securityLabel']) {
            this.securityLabel = source.securityLabel.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.securityLabel = [];
        }
        if (source['purpose']) {
            this.purpose = source.purpose.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.purpose = [];
        }
        if (source['dataPeriod']) {
            this.dataPeriod = new fhir.Period(source.dataPeriod, options);
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.ConsentData(x, options));
        }
        else {
            this.data = [];
        }
        if (source['except']) {
            this.except = source.except.map((x) => new fhir.ConsentExcept(x, options));
        }
        else {
            this.except = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Consent';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'ConsentState', ConsentStateVsValidation, 'r'));
        iss.push(...this.vOA('category', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('period', exp));
        iss.push(...this.vOS('dateTime', exp));
        iss.push(...this.vOA('consentingParty', exp));
        iss.push(...this.vOA('actor', exp));
        iss.push(...this.vOA('action', exp));
        iss.push(...this.vOA('organization', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOA('policy', exp));
        iss.push(...this.vOS('policyRule', exp));
        iss.push(...this.vOA('securityLabel', exp));
        iss.push(...this.vOA('purpose', exp));
        iss.push(...this.vOS('dataPeriod', exp));
        iss.push(...this.vOA('data', exp));
        iss.push(...this.vOA('except', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Consent._fts_dataType = 'Consent';
/**
 * Internal flag to properly serialize choice-type element Consent.source[x]
 */
Consent._fts_sourceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uc2VudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvQ29uc2VudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx5QkFBeUI7QUFFekIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBR3BHLGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQW1CbEcsYUFBYTtBQUNiLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBbUJ4Rjs7R0FFRztBQUNILE1BQU0sT0FBTyxZQUFhLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhcEQ7O09BRUc7SUFDSCxZQUFZLFNBQW1DLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3pGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDOUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ3ZGO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7U0FBRTtJQUNqQyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFD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SSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFqS0Q7O0dBRUc7QUFDNkIscUJBQWEsR0FBVSxTQUFTLENBQUM7QUFpRGpFOztHQUVHO0FBQ3VCLDJCQUFtQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yMy5jb3JlIHZlcnNpb246IDMuMC4yXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQ29uc2VudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudERhdGFNZWFuaW5nQ29kZXMsICBDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudERhdGFNZWFuaW5nQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnREYXRhTWVhbmluZ1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudERhdGFNZWFuaW5nVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50RXhjZXB0VHlwZUNvZGVzLCAgQ29uc2VudEV4Y2VwdFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudEV4Y2VwdFR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudEV4Y2VwdFR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRFeGNlcHRUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50QWN0aW9uQ29kZXMsICBDb25zZW50QWN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRBY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudEFjdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudEFjdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VjdXJpdHlMYWJlbHNDb2RlcywgIFNlY3VyaXR5TGFiZWxzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlY3VyaXR5TGFiZWxzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlY3VyaXR5TGFiZWxzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWN1cml0eUxhYmVsc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNQdXJwb3NlT2ZVc2VDb2RlcywgIFYzUHVycG9zZU9mVXNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzUHVycG9zZU9mVXNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzUHVycG9zZU9mVXNlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM1B1cnBvc2VPZlVzZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudENvbnRlbnRDb2RlcywgIENvbnNlbnRDb250ZW50Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRDb250ZW50Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDb250ZW50VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q29udGVudFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFN0YXRlQ29kZXMsICBDb25zZW50U3RhdGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRTdGF0ZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50Q2F0ZWdvcnlDb2RlcywgIENvbnNlbnRDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudENhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q2F0ZWdvcnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudEFjdG9yIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRBY3RvckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgaW5kaXZpZHVhbCBpcyBpbnZvbHZlZCBpbiB0aGUgcmVzb3VyY2VzIGNvbnRlbnQgdGhhdCBpcyBkZXNjcmliZWQgaW4gdGhlIGNvbnNlbnQuXHJcbiAgICovXHJcbiAgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlIHRoYXQgaWRlbnRpZmllcyB0aGUgYWN0b3IuIFRvIGlkZW50aWZ5IGEgYWN0b3JzIGJ5IHR5cGUsIHVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICByZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIGNvbnNlbnQuIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50QWN0b3IgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25zZW50QWN0b3InO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgaW5kaXZpZHVhbCBpcyBpbnZvbHZlZCBpbiB0aGUgcmVzb3VyY2VzIGNvbnRlbnQgdGhhdCBpcyBkZXNjcmliZWQgaW4gdGhlIGNvbnNlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlIHRoYXQgaWRlbnRpZmllcyB0aGUgYWN0b3IuIFRvIGlkZW50aWZ5IGEgYWN0b3JzIGJ5IHR5cGUsIHVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnRBY3RvciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRBY3RvckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb2xlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZSddKSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWZlcmVuY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWZlcmVuY2UgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ29uc2VudC5hY3RvcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3JvbGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3JlZmVyZW5jZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudFBvbGljeSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25zZW50UG9saWN5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRW50aXR5IG9yIE9yZ2FuaXphdGlvbiBoYXZpbmcgcmVndWxhdG9yeSBqdXJpc2RpY3Rpb24gb3IgYWNjb3VudGFiaWxpdHkgZm9yIMKgZW5mb3JjaW5nIHBvbGljaWVzIHBlcnRhaW5pbmcgdG8gQ29uc2VudCBEaXJlY3RpdmVzLlxyXG4gICAqL1xyXG4gIGF1dGhvcml0eT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25zZW50LnBvbGljeS5hdXRob3JpdHlcclxuICAgKi9cclxuICBfYXV0aG9yaXR5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgZm9yIGRpc2NvdmVyYWJpbGl0eSAvIGRvY3VtZW50YXRpb24sIGFuZCBkb2VzIG5vdCBtb2RpZnkgb3IgcXVhbGlmeSB0aGUgcG9saWN5IHJ1bGVzLlxyXG4gICAqL1xyXG4gIHVyaT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25zZW50LnBvbGljeS51cmlcclxuICAgKi9cclxuICBfdXJpPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZWZlcmVuY2VzIHRvIHRoZSBwb2xpY2llcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGlzIGNvbnNlbnQgc2NvcGUuIFBvbGljaWVzIG1heSBiZSBvcmdhbml6YXRpb25hbCwgYnV0IGFyZSBvZnRlbiBkZWZpbmVkIGp1cmlzZGljdGlvbmFsbHksIG9yIGluIGxhdy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50UG9saWN5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFBvbGljeSc7XHJcbiAgLyoqXHJcbiAgICogRW50aXR5IG9yIE9yZ2FuaXphdGlvbiBoYXZpbmcgcmVndWxhdG9yeSBqdXJpc2RpY3Rpb24gb3IgYWNjb3VudGFiaWxpdHkgZm9yIMKgZW5mb3JjaW5nIHBvbGljaWVzIHBlcnRhaW5pbmcgdG8gQ29uc2VudCBEaXJlY3RpdmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpdHk/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBmb3IgZGlzY292ZXJhYmlsaXR5IC8gZG9jdW1lbnRhdGlvbiwgYW5kIGRvZXMgbm90IG1vZGlmeSBvciBxdWFsaWZ5IHRoZSBwb2xpY3kgcnVsZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHVyaT86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFBvbGljeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRQb2xpY3lBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yaXR5J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmF1dGhvcml0eSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UuYXV0aG9yaXR5fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hdXRob3JpdHknXSkge1xyXG4gICAgICBpZiAodGhpcy5hdXRob3JpdHkpIHsgdGhpcy5hdXRob3JpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXV0aG9yaXR5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXV0aG9yaXR5ID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX2F1dGhvcml0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndXJpJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnVyaSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJpfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmknXSkge1xyXG4gICAgICBpZiAodGhpcy51cmkpIHsgdGhpcy51cmkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJpISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJpID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VyaSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbnNlbnQucG9saWN5JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYXV0aG9yaXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd1cmknLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnREYXRhIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnREYXRhQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSByZXNvdXJjZSByZWZlcmVuY2UgaXMgaW50ZXJwcmV0ZWQgd2hlbiB0ZXN0aW5nIGNvbnNlbnQgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIG1lYW5pbmc6IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQuZGF0YS5tZWFuaW5nXHJcbiAgICovXHJcbiAgX21lYW5pbmc/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgcmVzb3VyY2UgdGhhdCBkZWZpbmVzIHdoaWNoIHJlc291cmNlcyBhcmUgY292ZXJlZCBieSB0aGlzIGNvbnNlbnQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXNvdXJjZXMgY29udHJvbGxlZCBieSB0aGlzIGNvbnNlbnQsIGlmIHNwZWNpZmljIHJlc291cmNlcyBhcmUgcmVmZXJlbmNlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50RGF0YSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnREYXRhJztcclxuICAvKipcclxuICAgKiBIb3cgdGhlIHJlc291cmNlIHJlZmVyZW5jZSBpcyBpbnRlcnByZXRlZCB3aGVuIHRlc3RpbmcgY29uc2VudCByZXN0cmljdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYW5pbmc6IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyByZXNvdXJjZSB0aGF0IGRlZmluZXMgd2hpY2ggcmVzb3VyY2VzIGFyZSBjb3ZlcmVkIGJ5IHRoaXMgY29uc2VudC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnREYXRhIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudERhdGFBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbWVhbmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5tZWFuaW5nID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1lYW5pbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVhbmluZyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFuaW5nJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWVhbmluZykgeyB0aGlzLm1lYW5pbmcuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhbmluZyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lYW5pbmcgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT4oc291cmNlLl9tZWFuaW5nIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2UnXSkgeyB0aGlzLnJlZmVyZW5jZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVmZXJlbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbnNlbnQuZGF0YScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdtZWFuaW5nJyxleHAsJ0NvbnNlbnREYXRhTWVhbmluZycsQ29uc2VudERhdGFNZWFuaW5nVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3JlZmVyZW5jZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudEV4Y2VwdEFjdG9yIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRFeGNlcHRBY3RvckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgaW5kaXZpZHVhbCBpcyBpbnZvbHZlZCBpbiB0aGUgcmVzb3VyY2VzIGNvbnRlbnQgdGhhdCBpcyBkZXNjcmliZWQgaW4gdGhlIGV4Y2VwdGlvbi5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBhY3Rvci4gVG8gaWRlbnRpZnkgYSBhY3RvcnMgYnkgdHlwZSwgdXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXaG8gb3Igd2hhdCBpcyBjb250cm9sbGVkIGJ5IHRoaXMgRXhjZXB0aW9uLiBVc2UgZ3JvdXAgdG8gaWRlbnRpZnkgYSBzZXQgb2YgYWN0b3JzIGJ5IHNvbWUgcHJvcGVydHkgdGhleSBzaGFyZSAoZS5nLiAnYWRtaXR0aW5nIG9mZmljZXJzJykuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc2VudEV4Y2VwdEFjdG9yIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudEV4Y2VwdEFjdG9yJztcclxuICAvKipcclxuICAgKiBIb3cgdGhlIGluZGl2aWR1YWwgaXMgaW52b2x2ZWQgaW4gdGhlIHJlc291cmNlcyBjb250ZW50IHRoYXQgaXMgZGVzY3JpYmVkIGluIHRoZSBleGNlcHRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlIHRoYXQgaWRlbnRpZmllcyB0aGUgYWN0b3IuIFRvIGlkZW50aWZ5IGEgYWN0b3JzIGJ5IHR5cGUsIHVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnRFeGNlcHRBY3RvciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRFeGNlcHRBY3RvckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb2xlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZSddKSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWZlcmVuY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWZlcmVuY2UgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ29uc2VudC5leGNlcHQuYWN0b3InIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyb2xlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyZWZlcmVuY2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnRFeGNlcHREYXRhIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRFeGNlcHREYXRhQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSByZXNvdXJjZSByZWZlcmVuY2UgaXMgaW50ZXJwcmV0ZWQgd2hlbiB0ZXN0aW5nIGNvbnNlbnQgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIG1lYW5pbmc6IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQuZXhjZXB0LmRhdGEubWVhbmluZ1xyXG4gICAqL1xyXG4gIF9tZWFuaW5nPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHJlc291cmNlIHRoYXQgZGVmaW5lcyB3aGljaCByZXNvdXJjZXMgYXJlIGNvdmVyZWQgYnkgdGhpcyBjb25zZW50LlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcmVzb3VyY2VzIGNvbnRyb2xsZWQgYnkgdGhpcyBleGNlcHRpb24sIGlmIHNwZWNpZmljIHJlc291cmNlcyBhcmUgcmVmZXJlbmNlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50RXhjZXB0RGF0YSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnRFeGNlcHREYXRhJztcclxuICAvKipcclxuICAgKiBIb3cgdGhlIHJlc291cmNlIHJlZmVyZW5jZSBpcyBpbnRlcnByZXRlZCB3aGVuIHRlc3RpbmcgY29uc2VudCByZXN0cmljdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYW5pbmc6IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyByZXNvdXJjZSB0aGF0IGRlZmluZXMgd2hpY2ggcmVzb3VyY2VzIGFyZSBjb3ZlcmVkIGJ5IHRoaXMgY29uc2VudC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnRFeGNlcHREYXRhIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudEV4Y2VwdERhdGFBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbWVhbmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5tZWFuaW5nID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1lYW5pbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVhbmluZyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFuaW5nJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWVhbmluZykgeyB0aGlzLm1lYW5pbmcuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhbmluZyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lYW5pbmcgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT4oc291cmNlLl9tZWFuaW5nIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2UnXSkgeyB0aGlzLnJlZmVyZW5jZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVmZXJlbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbnNlbnQuZXhjZXB0LmRhdGEnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVignbWVhbmluZycsZXhwLCdDb25zZW50RGF0YU1lYW5pbmcnLENvbnNlbnREYXRhTWVhbmluZ1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyZWZlcmVuY2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnRFeGNlcHQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudEV4Y2VwdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEFjdGlvbiAgdG8gdGFrZSAtIHBlcm1pdCBvciBkZW55IC0gd2hlbiB0aGUgZXhjZXB0aW9uIGNvbmRpdGlvbnMgYXJlIG1ldC5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPENvbnNlbnRFeGNlcHRUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQuZXhjZXB0LnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWVmcmFtZSBpbiB0aGlzIGV4Y2VwdGlvbiBpcyB2YWxpZC5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IGlzIGNvbnRyb2xsZWQgYnkgdGhpcyBFeGNlcHRpb24uIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBhY3Rvcj86IGZoaXIuQ29uc2VudEV4Y2VwdEFjdG9yQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGlyZWN0IGFjdGlvbiAobm90IHRoZSBncm91bmRzIGZvciB0aGUgYWN0aW9uIGNvdmVyZWQgaW4gdGhlIHB1cnBvc2UgZWxlbWVudCkuIEF0IHByZXNlbnQsIHRoZSBvbmx5IGFjdGlvbiBpbiB0aGUgdW5kZXJzdG9vZCBhbmQgdGVzdGVkIHNjb3BlIG9mIHRoaXMgcmVzb3VyY2UgaXMgJ3JlYWQnLlxyXG4gICAqL1xyXG4gIGFjdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgY29uc2VudCBzcGVjaWZpZXMgYSBzZWN1cml0eSBsYWJlbCBvZiBcIlJcIiB0aGVuIGl0IGFwcGxpZXMgdG8gYWxsIHJlc291cmNlcyB0aGF0IGFyZSBsYWJlbGVkIFwiUlwiIG9yIGxvd2VyLiBFLmcuIGZvciBDb25maWRlbnRpYWxpdHksIGl0J3MgYSBoaWdoIHdhdGVyIG1hcmsuIEZvciBvdGhlciBraW5kcyBvZiBzZWN1cml0eSBsYWJlbHMsIHN1YnN1bXB0aW9uIGxvZ2ljIGFwcGxpZXMuIE5vdCBhbGwgb2YgdGhlIHNlY3VyaXR5IGxhYmVscyBtYWtlIHNlbnNlIGZvciB1c2UgaW4gdGhpcyBlbGVtZW50IChtYXkgZGVmaW5lIGEgbmFycm93ZXIgdmFsdWUgc2V0PykuXHJcbiAgICovXHJcbiAgc2VjdXJpdHlMYWJlbD86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFLmcuIGlmIHRoZSBwdXJwb3NlIGlzICdyZXNlYXJjaCcsIHRoZW4gdGhlIG9wZXJhdGlvbmFsIGNvbnRleHQgbXVzdCBiZSByZXNlYXJjaCwgaW4gb3JkZXIgZm9yIHRoZSBjb25zZW50IHRvIGFwcGx5LiBOb3QgYWxsIG9mIHRoZSBzZWN1cml0eSBsYWJlbHMgbWFrZSBzZW5zZSBmb3IgdXNlIGluIHRoaXMgZWxlbWVudCAobWF5IGRlZmluZSBhIG5hcnJvd2VyIHZhbHVlIHNldD8pLlxyXG4gICAqL1xyXG4gIHB1cnBvc2U/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdHlwZXMgYXJlIG9yJ2VkIHRvZ2V0aGVyLiBUaGUgaW50ZW50aW9uIG9mIHRoZSBjb250ZW50VHlwZSBlbGVtZW50IGlzIHRoYXQgdGhlIGNvZGVzIHJlZmVyIHRvIHByb2ZpbGVzIG9yIGRvY3VtZW50IHR5cGVzIGRlZmluZWQgaW4gYSBzdGFuZGFyZCBvciBhbiBpbXBsZW1lbnRhdGlvbiBndWlkZSBzb21ld2hlcmUuXHJcbiAgICovXHJcbiAgY2xhc3M/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCB1c2Ugb2YgdGhpcyBpcyBhIERvY3VtZW50IGNvZGUgd2l0aCBjbGFzcyA9IENEQS5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaGFzIGEgZGlmZmVyZW50IHNlbnNlIHRvIHRoZSBDb25zZW50LnBlcmlvZCAtIHRoYXQgaXMgd2hlbiB0aGUgY29uc2VudCBhZ3JlZW1lbnQgaG9sZHMuIFRoaXMgaXMgdGhlIHRpbWUgcGVyaW9kIG9mIHRoZSBkYXRhIHRoYXQgaXMgY29udHJvbGxlZCBieSB0aGUgYWdyZWVtZW50LlxyXG4gICAqL1xyXG4gIGRhdGFQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNvdXJjZXMgY29udHJvbGxlZCBieSB0aGlzIGV4Y2VwdGlvbiwgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gICAqL1xyXG4gIGRhdGE/OiBmaGlyLkNvbnNlbnRFeGNlcHREYXRhQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGV4Y2VwdGlvbiB0byB0aGUgYmFzZSBwb2xpY3kgb2YgdGhpcyBjb25zZW50LiBBbiBleGNlcHRpb24gY2FuIGJlIGFuIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgYWNjZXNzIHBlcm1pc3Npb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnNlbnRFeGNlcHQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25zZW50RXhjZXB0JztcclxuICAvKipcclxuICAgKiBBY3Rpb24gIHRvIHRha2UgLSBwZXJtaXQgb3IgZGVueSAtIHdoZW4gdGhlIGV4Y2VwdGlvbiBjb25kaXRpb25zIGFyZSBtZXQuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuRmhpckNvZGU8Q29uc2VudEV4Y2VwdFR5cGVDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZWZyYW1lIGluIHRoaXMgZXhjZXB0aW9uIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIEV4Y2VwdGlvbi4gVXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3RvcjogZmhpci5Db25zZW50RXhjZXB0QWN0b3JbXTtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGlyZWN0IGFjdGlvbiAobm90IHRoZSBncm91bmRzIGZvciB0aGUgYWN0aW9uIGNvdmVyZWQgaW4gdGhlIHB1cnBvc2UgZWxlbWVudCkuIEF0IHByZXNlbnQsIHRoZSBvbmx5IGFjdGlvbiBpbiB0aGUgdW5kZXJzdG9vZCBhbmQgdGVzdGVkIHNjb3BlIG9mIHRoaXMgcmVzb3VyY2UgaXMgJ3JlYWQnLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGNvbnNlbnQgc3BlY2lmaWVzIGEgc2VjdXJpdHkgbGFiZWwgb2YgXCJSXCIgdGhlbiBpdCBhcHBsaWVzIHRvIGFsbCByZXNvdXJjZXMgdGhhdCBhcmUgbGFiZWxlZCBcIlJcIiBvciBsb3dlci4gRS5nLiBmb3IgQ29uZmlkZW50aWFsaXR5LCBpdCdzIGEgaGlnaCB3YXRlciBtYXJrLiBGb3Igb3RoZXIga2luZHMgb2Ygc2VjdXJpdHkgbGFiZWxzLCBzdWJzdW1wdGlvbiBsb2dpYyBhcHBsaWVzLiBOb3QgYWxsIG9mIHRoZSBzZWN1cml0eSBsYWJlbHMgbWFrZSBzZW5zZSBmb3IgdXNlIGluIHRoaXMgZWxlbWVudCAobWF5IGRlZmluZSBhIG5hcnJvd2VyIHZhbHVlIHNldD8pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZWN1cml0eUxhYmVsOiBmaGlyLkNvZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIEUuZy4gaWYgdGhlIHB1cnBvc2UgaXMgJ3Jlc2VhcmNoJywgdGhlbiB0aGUgb3BlcmF0aW9uYWwgY29udGV4dCBtdXN0IGJlIHJlc2VhcmNoLCBpbiBvcmRlciBmb3IgdGhlIGNvbnNlbnQgdG8gYXBwbHkuIE5vdCBhbGwgb2YgdGhlIHNlY3VyaXR5IGxhYmVscyBtYWtlIHNlbnNlIGZvciB1c2UgaW4gdGhpcyBlbGVtZW50IChtYXkgZGVmaW5lIGEgbmFycm93ZXIgdmFsdWUgc2V0PykuXHJcbiAgICovXHJcbiAgcHVibGljIHB1cnBvc2U6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdHlwZXMgYXJlIG9yJ2VkIHRvZ2V0aGVyLiBUaGUgaW50ZW50aW9uIG9mIHRoZSBjb250ZW50VHlwZSBlbGVtZW50IGlzIHRoYXQgdGhlIGNvZGVzIHJlZmVyIHRvIHByb2ZpbGVzIG9yIGRvY3VtZW50IHR5cGVzIGRlZmluZWQgaW4gYSBzdGFuZGFyZCBvciBhbiBpbXBsZW1lbnRhdGlvbiBndWlkZSBzb21ld2hlcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGNsYXNzOiBmaGlyLkNvZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWwgdXNlIG9mIHRoaXMgaXMgYSBEb2N1bWVudCBjb2RlIHdpdGggY2xhc3MgPSBDREEuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgYSBkaWZmZXJlbnQgc2Vuc2UgdG8gdGhlIENvbnNlbnQucGVyaW9kIC0gdGhhdCBpcyB3aGVuIHRoZSBjb25zZW50IGFncmVlbWVudCBob2xkcy4gVGhpcyBpcyB0aGUgdGltZSBwZXJpb2Qgb2YgdGhlIGRhdGEgdGhhdCBpcyBjb250cm9sbGVkIGJ5IHRoZSBhZ3JlZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGFQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlcyBjb250cm9sbGVkIGJ5IHRoaXMgZXhjZXB0aW9uLCBpZiBzcGVjaWZpYyByZXNvdXJjZXMgYXJlIHJlZmVyZW5jZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGE6IGZoaXIuQ29uc2VudEV4Y2VwdERhdGFbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25zZW50RXhjZXB0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudEV4Y2VwdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50RXhjZXB0VHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudEV4Y2VwdFR5cGVDb2RlVHlwZT4oc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0b3InXSkgeyB0aGlzLmFjdG9yID0gc291cmNlLmFjdG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudEV4Y2VwdEFjdG9yKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0b3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlY3VyaXR5TGFiZWwnXSkgeyB0aGlzLnNlY3VyaXR5TGFiZWwgPSBzb3VyY2Uuc2VjdXJpdHlMYWJlbC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGluZyh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNlY3VyaXR5TGFiZWwgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHVycG9zZSddKSB7IHRoaXMucHVycG9zZSA9IHNvdXJjZS5wdXJwb3NlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHVycG9zZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjbGFzcyddKSB7IHRoaXMuY2xhc3MgPSBzb3VyY2UuY2xhc3MubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jbGFzcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGFQZXJpb2QnXSkgeyB0aGlzLmRhdGFQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGFQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRhJ10pIHsgdGhpcy5kYXRhID0gc291cmNlLmRhdGEubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50RXhjZXB0RGF0YSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGEgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbnNlbnQuZXhjZXB0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3R5cGUnLGV4cCwnQ29uc2VudEV4Y2VwdFR5cGUnLENvbnNlbnRFeGNlcHRUeXBlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BlcmlvZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWN0b3InLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2FjdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc2VjdXJpdHlMYWJlbCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHVycG9zZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY2xhc3MnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RhdGFQZXJpb2QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2RhdGEnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvbnNlbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpZGVudGlmaWVyIGlzIGlkZW50aWZpZXMgdGhpcyBjb3B5IG9mIHRoZSBjb25zZW50LiBXaGVyZSB0aGlzIGlkZW50aWZpZXIgaXMgYWxzbyB1c2VkIGVsc2V3aGVyZSBhcyB0aGUgaWRlbnRpZmllciBmb3IgYSBjb25zZW50IHJlY29yZCAoZS5nLiBhIENEQSBjb25zZW50IGRvY3VtZW50KSB0aGVuIHRoZSBjb25zZW50IGRldGFpbHMgYXJlIGV4cGVjdGVkIHRvIGJlIHRoZSBzYW1lLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgcmVqZWN0ZWQgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBDb25zZW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENvbnNlbnRTdGF0ZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25zZW50LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIHR5cGUgb2YgY29uc2VudHMgZm91bmQgaW4gdGhlIHN0YXRlbWVudC4gVGhpcyBlbGVtZW50IHN1cHBvcnRzIGluZGV4aW5nIGFuZCByZXRyaWV2YWwgb2YgY29uc2VudCBzdGF0ZW1lbnRzLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgYXV0aG9yLCBidXQgZm9yIHlvdW5nIGFuZCBvbGQgcGVvcGxlLCBpdCBtYXkgYmUgc29tZSBvdGhlciBwZXJzb24uXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBjYW4gYmUgYSBzdWJzZXQgb2YgdGhlIHBlcmlvZCBvZiB0aGUgb3JpZ2luYWwgc3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBub3QgdGhlIHRpbWUgb2YgdGhlIG9yaWdpbmFsIGNvbnNlbnQsIGJ1dCB0aGUgdGltZSB0aGF0IHRoaXMgc3RhdGVtZW50IHdhcyBtYWRlIG9yIGRlcml2ZWQuXHJcbiAgICovXHJcbiAgZGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25zZW50LmRhdGVUaW1lXHJcbiAgICovXHJcbiAgX2RhdGVUaW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBDb21tb25seSwgdGhlIHBhdGllbnQgdGhlIGNvbnNlbnQgcGVydGFpbnMgdG8gaXMgdGhlIGNvbnNlbnRvciwgYnV0IHBhcnRpY3VsYXJseSBmb3IgeW91bmcgYW5kIG9sZCBwZW9wbGUsIGl0IG1heSBiZSBzb21lIG90aGVyIHBlcnNvbiAtIGUuZy4gYSBsZWdhbCBndWFyZGlhbi5cclxuICAgKi9cclxuICBjb25zZW50aW5nUGFydHk/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIGNvbnNlbnQuIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBhY3Rvcj86IGZoaXIuQ29uc2VudEFjdG9yQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGlyZWN0IGFjdGlvbiAobm90IHRoZSBncm91bmRzIGZvciB0aGUgYWN0aW9uIGNvdmVyZWQgaW4gdGhlIHB1cnBvc2UgZWxlbWVudCkuIEF0IHByZXNlbnQsIHRoZSBvbmx5IGFjdGlvbiBpbiB0aGUgdW5kZXJzdG9vZCBhbmQgdGVzdGVkIHNjb3BlIG9mIHRoaXMgcmVzb3VyY2UgaXMgJ3JlYWQnLlxyXG4gICAqL1xyXG4gIGFjdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgbWFuYWdlcyB0aGUgY29uc2VudCwgYW5kIHRoZSBmcmFtZXdvcmsgd2l0aGluIHdoaWNoIGl0IGlzIGV4ZWN1dGVkLlxyXG4gICAqL1xyXG4gIG9yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGNhbiBiZSBjb250YWluZWQgaW5saW5lIChBdHRhY2htZW50KSwgcmVmZXJlbmNlZCBkaXJlY3RseSAoQ29uc2VudCksIHJlZmVyZW5jZWQgaW4gYSBjb25zZW50IHJlcG9zaXRvcnkgKERvY3VtZW50UmVmZXJlbmNlKSwgb3Igc2ltcGx5IGJ5IGFuIGlkZW50aWZpZXIgKElkZW50aWZpZXIpLCBlLmcuIGEgQ0RBIGRvY3VtZW50IGlkLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuQXR0YWNobWVudHxmaGlyLklkZW50aWZpZXJ8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgc291cmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgc291cmNlSWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgc291cmNlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVmZXJlbmNlcyB0byB0aGUgcG9saWNpZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gdGhpcyBjb25zZW50IHNjb3BlLiBQb2xpY2llcyBtYXkgYmUgb3JnYW5pemF0aW9uYWwsIGJ1dCBhcmUgb2Z0ZW4gZGVmaW5lZCBqdXJpc2RpY3Rpb25hbGx5LCBvciBpbiBsYXcuXHJcbiAgICovXHJcbiAgcG9saWN5PzogZmhpci5Db25zZW50UG9saWN5QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgcG9saWN5IHJlZmVyZW5jZSBpcyBub3Qga25vd24sIHRoZSByZXNvdXJjZSBjYW5ub3QgYmUgcHJvY2Vzc2VkLiBXaGVyZSB0aGUgcmVmZXJlbmNlIGlzIGFic2VudCwgdGhlcmUgaXMgbm8gcGFydGljdWxhciBwb2xpY3kgb3RoZXIgdGhhbiB3aGF0IGlzIGV4cHJlc3NlZCBkaXJlY3RseSBpbiB0aGUgY29uc2VudCByZXNvdXJjZS5cclxuICAgKi9cclxuICBwb2xpY3lSdWxlPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQucG9saWN5UnVsZVxyXG4gICAqL1xyXG4gIF9wb2xpY3lSdWxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiB0aGUgY29uc2VudCBzcGVjaWZpZXMgYSBzZWN1cml0eSBsYWJlbCBvZiBcIlJcIiB0aGVuIGl0IGFwcGxpZXMgdG8gYWxsIHJlc291cmNlcyB0aGF0IGFyZSBsYWJlbGVkIFwiUlwiIG9yIGxvd2VyLiBFLmcuIGZvciBDb25maWRlbnRpYWxpdHksIGl0J3MgYSBoaWdoIHdhdGVyIG1hcmsuIEZvciBvdGhlciBraW5kcyBvZiBzZWN1cml0eSBsYWJlbHMsIHN1YnN1bXB0aW9uIGxvZ2ljIGFwcGxpZXMuIE5vdCBhbGwgb2YgdGhlIHNlY3VyaXR5IGxhYmVscyBtYWtlIHNlbnNlIGZvciB1c2UgaW4gdGhpcyBlbGVtZW50IChtYXkgZGVmaW5lIGEgbmFycm93ZXIgdmFsdWUgc2V0PykuXHJcbiAgICovXHJcbiAgc2VjdXJpdHlMYWJlbD86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgZm9yIGRpc2NvdmVyYWJpbGl0eSAvIGRvY3VtZW50YXRpb24sIGFuZCBkb2VzIG5vdCBtb2RpZnkgb3IgcXVhbGlmeSB0aGUgcG9saWN5IChlLmcuIHRoZSBwb2xpY3kgaXRzZWxmIGRlc2NyaWJlcyB0aGUgcHVycG9zZXMgZm9yIHdoaWNoIGl0IGFwcGxpZXMpLlxyXG4gICAqL1xyXG4gIHB1cnBvc2U/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgYSBkaWZmZXJlbnQgc2Vuc2UgdG8gdGhlIENvbnNlbnQucGVyaW9kIC0gdGhhdCBpcyB3aGVuIHRoZSBjb25zZW50IGFncmVlbWVudCBob2xkcy4gVGhpcyBpcyB0aGUgdGltZSBwZXJpb2Qgb2YgdGhlIGRhdGEgdGhhdCBpcyBjb250cm9sbGVkIGJ5IHRoZSBhZ3JlZW1lbnQuXHJcbiAgICovXHJcbiAgZGF0YVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlcyBjb250cm9sbGVkIGJ5IHRoaXMgY29uc2VudCwgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gICAqL1xyXG4gIGRhdGE/OiBmaGlyLkNvbnNlbnREYXRhQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBleGNlcHRpb24gdG8gdGhlIGJhc2UgcG9saWN5IG9mIHRoaXMgY29uc2VudC4gQW4gZXhjZXB0aW9uIGNhbiBiZSBhbiBhZGRpdGlvbiBvciByZW1vdmFsIG9mIGFjY2VzcyBwZXJtaXNzaW9ucy5cclxuICAgKi9cclxuICBleGNlcHQ/OiBmaGlyLkNvbnNlbnRFeGNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBoZWFsdGhjYXJlIGNvbnN1bWVy4oCZcyBwb2xpY3kgY2hvaWNlcywgd2hpY2ggcGVybWl0cyBvciBkZW5pZXMgaWRlbnRpZmllZCByZWNpcGllbnQocykgb3IgcmVjaXBpZW50IHJvbGUocykgdG8gcGVyZm9ybSBvbmUgb3IgbW9yZSBhY3Rpb25zIHdpdGhpbiBhIGdpdmVuIHBvbGljeSBjb250ZXh0LCBmb3Igc3BlY2lmaWMgcHVycG9zZXMgYW5kIHBlcmlvZHMgb2YgdGltZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25zZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNvbnNlbnRcIjtcclxuICAvKipcclxuICAgKiBUaGlzIGlkZW50aWZpZXIgaXMgaWRlbnRpZmllcyB0aGlzIGNvcHkgb2YgdGhlIGNvbnNlbnQuIFdoZXJlIHRoaXMgaWRlbnRpZmllciBpcyBhbHNvIHVzZWQgZWxzZXdoZXJlIGFzIHRoZSBpZGVudGlmaWVyIGZvciBhIGNvbnNlbnQgcmVjb3JkIChlLmcuIGEgQ0RBIGNvbnNlbnQgZG9jdW1lbnQpIHRoZW4gdGhlIGNvbnNlbnQgZGV0YWlscyBhcmUgZXhwZWN0ZWQgdG8gYmUgdGhlIHNhbWUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyByZWplY3RlZCBhbmQgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmsgdGhlIENvbnNlbnQgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENvbnNlbnRTdGF0ZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIHR5cGUgb2YgY29uc2VudHMgZm91bmQgaW4gdGhlIHN0YXRlbWVudC4gVGhpcyBlbGVtZW50IHN1cHBvcnRzIGluZGV4aW5nIGFuZCByZXRyaWV2YWwgb2YgY29uc2VudCBzdGF0ZW1lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBDb21tb25seSwgdGhlIHBhdGllbnQgdGhlIGNvbnNlbnQgcGVydGFpbnMgdG8gaXMgdGhlIGF1dGhvciwgYnV0IGZvciB5b3VuZyBhbmQgb2xkIHBlb3BsZSwgaXQgbWF5IGJlIHNvbWUgb3RoZXIgcGVyc29uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgY2FuIGJlIGEgc3Vic2V0IG9mIHRoZSBwZXJpb2Qgb2YgdGhlIG9yaWdpbmFsIHN0YXRlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbm90IHRoZSB0aW1lIG9mIHRoZSBvcmlnaW5hbCBjb25zZW50LCBidXQgdGhlIHRpbWUgdGhhdCB0aGlzIHN0YXRlbWVudCB3YXMgbWFkZSBvciBkZXJpdmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb21tb25seSwgdGhlIHBhdGllbnQgdGhlIGNvbnNlbnQgcGVydGFpbnMgdG8gaXMgdGhlIGNvbnNlbnRvciwgYnV0IHBhcnRpY3VsYXJseSBmb3IgeW91bmcgYW5kIG9sZCBwZW9wbGUsIGl0IG1heSBiZSBzb21lIG90aGVyIHBlcnNvbiAtIGUuZy4gYSBsZWdhbCBndWFyZGlhbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29uc2VudGluZ1BhcnR5OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IGlzIGNvbnRyb2xsZWQgYnkgdGhpcyBjb25zZW50LiBVc2UgZ3JvdXAgdG8gaWRlbnRpZnkgYSBzZXQgb2YgYWN0b3JzIGJ5IHNvbWUgcHJvcGVydHkgdGhleSBzaGFyZSAoZS5nLiAnYWRtaXR0aW5nIG9mZmljZXJzJykuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdG9yOiBmaGlyLkNvbnNlbnRBY3RvcltdO1xyXG4gIC8qKlxyXG4gICAqIE5vdGUgdGhhdCB0aGlzIGlzIHRoZSBkaXJlY3QgYWN0aW9uIChub3QgdGhlIGdyb3VuZHMgZm9yIHRoZSBhY3Rpb24gY292ZXJlZCBpbiB0aGUgcHVycG9zZSBlbGVtZW50KS4gQXQgcHJlc2VudCwgdGhlIG9ubHkgYWN0aW9uIGluIHRoZSB1bmRlcnN0b29kIGFuZCB0ZXN0ZWQgc2NvcGUgb2YgdGhpcyByZXNvdXJjZSBpcyAncmVhZCcuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgbWFuYWdlcyB0aGUgY29uc2VudCwgYW5kIHRoZSBmcmFtZXdvcmsgd2l0aGluIHdoaWNoIGl0IGlzIGV4ZWN1dGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcmdhbml6YXRpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBjYW4gYmUgY29udGFpbmVkIGlubGluZSAoQXR0YWNobWVudCksIHJlZmVyZW5jZWQgZGlyZWN0bHkgKENvbnNlbnQpLCByZWZlcmVuY2VkIGluIGEgY29uc2VudCByZXBvc2l0b3J5IChEb2N1bWVudFJlZmVyZW5jZSksIG9yIHNpbXBseSBieSBhbiBpZGVudGlmaWVyIChJZGVudGlmaWVyKSwgZS5nLiBhIENEQSBkb2N1bWVudCBpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlPzogKGZoaXIuQXR0YWNobWVudHxmaGlyLklkZW50aWZpZXJ8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENvbnNlbnQuc291cmNlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3NvdXJjZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2VzIHRvIHRoZSBwb2xpY2llcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGlzIGNvbnNlbnQgc2NvcGUuIFBvbGljaWVzIG1heSBiZSBvcmdhbml6YXRpb25hbCwgYnV0IGFyZSBvZnRlbiBkZWZpbmVkIGp1cmlzZGljdGlvbmFsbHksIG9yIGluIGxhdy5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5OiBmaGlyLkNvbnNlbnRQb2xpY3lbXTtcclxuICAvKipcclxuICAgKiBJZiB0aGUgcG9saWN5IHJlZmVyZW5jZSBpcyBub3Qga25vd24sIHRoZSByZXNvdXJjZSBjYW5ub3QgYmUgcHJvY2Vzc2VkLiBXaGVyZSB0aGUgcmVmZXJlbmNlIGlzIGFic2VudCwgdGhlcmUgaXMgbm8gcGFydGljdWxhciBwb2xpY3kgb3RoZXIgdGhhbiB3aGF0IGlzIGV4cHJlc3NlZCBkaXJlY3RseSBpbiB0aGUgY29uc2VudCByZXNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5UnVsZT86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGNvbnNlbnQgc3BlY2lmaWVzIGEgc2VjdXJpdHkgbGFiZWwgb2YgXCJSXCIgdGhlbiBpdCBhcHBsaWVzIHRvIGFsbCByZXNvdXJjZXMgdGhhdCBhcmUgbGFiZWxlZCBcIlJcIiBvciBsb3dlci4gRS5nLiBmb3IgQ29uZmlkZW50aWFsaXR5LCBpdCdzIGEgaGlnaCB3YXRlciBtYXJrLiBGb3Igb3RoZXIga2luZHMgb2Ygc2VjdXJpdHkgbGFiZWxzLCBzdWJzdW1wdGlvbiBsb2dpYyBhcHBsaWVzLiBOb3QgYWxsIG9mIHRoZSBzZWN1cml0eSBsYWJlbHMgbWFrZSBzZW5zZSBmb3IgdXNlIGluIHRoaXMgZWxlbWVudCAobWF5IGRlZmluZSBhIG5hcnJvd2VyIHZhbHVlIHNldD8pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZWN1cml0eUxhYmVsOiBmaGlyLkNvZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBmb3IgZGlzY292ZXJhYmlsaXR5IC8gZG9jdW1lbnRhdGlvbiwgYW5kIGRvZXMgbm90IG1vZGlmeSBvciBxdWFsaWZ5IHRoZSBwb2xpY3kgKGUuZy4gdGhlIHBvbGljeSBpdHNlbGYgZGVzY3JpYmVzIHRoZSBwdXJwb3NlcyBmb3Igd2hpY2ggaXQgYXBwbGllcykuXHJcbiAgICovXHJcbiAgcHVibGljIHB1cnBvc2U6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgYSBkaWZmZXJlbnQgc2Vuc2UgdG8gdGhlIENvbnNlbnQucGVyaW9kIC0gdGhhdCBpcyB3aGVuIHRoZSBjb25zZW50IGFncmVlbWVudCBob2xkcy4gVGhpcyBpcyB0aGUgdGltZSBwZXJpb2Qgb2YgdGhlIGRhdGEgdGhhdCBpcyBjb250cm9sbGVkIGJ5IHRoZSBhZ3JlZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGFQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlcyBjb250cm9sbGVkIGJ5IHRoaXMgY29uc2VudCwgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRhOiBmaGlyLkNvbnNlbnREYXRhW107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhjZXB0aW9uIHRvIHRoZSBiYXNlIHBvbGljeSBvZiB0aGlzIGNvbnNlbnQuIEFuIGV4Y2VwdGlvbiBjYW4gYmUgYW4gYWRkaXRpb24gb3IgcmVtb3ZhbCBvZiBhY2Nlc3MgcGVybWlzc2lvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGV4Y2VwdDogZmhpci5Db25zZW50RXhjZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQ29uc2VudCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50U3RhdGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBzb3VyY2UuY2F0ZWdvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmlvZCddKSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5wZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlVGltZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kYXRlVGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlVGltZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZVRpbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlVGltZSkgeyB0aGlzLmRhdGVUaW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVUaW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZVRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlVGltZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb25zZW50aW5nUGFydHknXSkgeyB0aGlzLmNvbnNlbnRpbmdQYXJ0eSA9IHNvdXJjZS5jb25zZW50aW5nUGFydHkubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb25zZW50aW5nUGFydHkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0b3InXSkgeyB0aGlzLmFjdG9yID0gc291cmNlLmFjdG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudEFjdG9yKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0b3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZ2FuaXphdGlvbiddKSB7IHRoaXMub3JnYW5pemF0aW9uID0gc291cmNlLm9yZ2FuaXphdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm9yZ2FuaXphdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IHNvdXJjZS5zb3VyY2U7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc291cmNlQXR0YWNobWVudCddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2Uuc291cmNlQXR0YWNobWVudCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc291cmNlSWRlbnRpZmllciddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2Uuc291cmNlSWRlbnRpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc291cmNlUmVmZXJlbmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNvdXJjZVJlZmVyZW5jZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BvbGljeSddKSB7IHRoaXMucG9saWN5ID0gc291cmNlLnBvbGljeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbnNlbnRQb2xpY3koeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wb2xpY3kgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncG9saWN5UnVsZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wb2xpY3lSdWxlID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5wb2xpY3lSdWxlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wb2xpY3lSdWxlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucG9saWN5UnVsZSkgeyB0aGlzLnBvbGljeVJ1bGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcG9saWN5UnVsZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnBvbGljeVJ1bGUgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fcG9saWN5UnVsZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VjdXJpdHlMYWJlbCddKSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IHNvdXJjZS5zZWN1cml0eUxhYmVsLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwdXJwb3NlJ10pIHsgdGhpcy5wdXJwb3NlID0gc291cmNlLnB1cnBvc2UubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wdXJwb3NlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGFQZXJpb2QnXSkgeyB0aGlzLmRhdGFQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGFQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRhJ10pIHsgdGhpcy5kYXRhID0gc291cmNlLmRhdGEubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50RGF0YSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGEgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXhjZXB0J10pIHsgdGhpcy5leGNlcHQgPSBzb3VyY2UuZXhjZXB0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudEV4Y2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV4Y2VwdCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ29uc2VudCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnQ29uc2VudFN0YXRlJyxDb25zZW50U3RhdGVWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY2F0ZWdvcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGllbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BlcmlvZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGF0ZVRpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvbnNlbnRpbmdQYXJ0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWN0b3InLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2FjdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnb3JnYW5pemF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzb3VyY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3BvbGljeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncG9saWN5UnVsZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc2VjdXJpdHlMYWJlbCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHVycG9zZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGF0YVBlcmlvZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGF0YScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZXhjZXB0JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==